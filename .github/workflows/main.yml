name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  job1:
    runs-on: ubuntu-latest
    outputs:
      version: ${{ steps.step1.outputs.test }}
    steps:
    - name: Checkout
      uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - name: Install GitVersion
      uses: gittools/actions/gitversion/setup@v0.9.4
      with:
        versionSpec: '5.3.x'
    - name: Use GitVersion
      id: gitversion # step id used as reference for output values
      uses: gittools/actions/gitversion/execute@v0.9.4
    - run: echo "::set-output name=test::${{ steps.gitversion.outputs.nuGetVersion }}"
  job2:
    runs-on: ubuntu-latest
    needs: job1
    steps:
    - run: echo ${{needs.job1.outputs.version}}

#    steps:
#    - uses: actions/checkout@v1
#    - uses: actions/setup-java@v1
#      with:
#        java-version: '12.x'
#    - uses: subosito/flutter-action@v1
#      with:
#        flutter-version: '1.9.1+hotfix.6'
#    - run: flutter pub get
#    - run: flutter test
      
